name: Discord Notification on Push

on:
  push:
    branches:
      - main
      - develop

jobs:
  notify:
    if: github.repository == 'depromeet/16th-team3-FE'
    runs-on: ubuntu-latest
    steps:
      - name: Send Discord Embed Notification
        uses: Ilshidur/action-discord@master
        env:
          DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK_URL }}
        with:
          args: |
            {
              "embeds": [{
                "title": "ğŸ“¦ Vercel ë°°í¬ ì•Œë¦¼",
                "description": "`${{ github.ref_name }}` ë¸Œëœì¹˜ì— ìƒˆë¡œìš´ ì»¤ë°‹ì´ í‘¸ì‹œë˜ì–´ Vercel ë°°í¬ê°€ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤!",
                "color": 3447003,
                "fields": [
                  {
                    "name": "ğŸ“ ì»¤ë°‹ ë©”ì‹œì§€",
                    "value": "${{ github.event.head_commit.message }}"
                  },
                  {
                    "name": "ğŸ‘¤ ì‘ì„±ì",
                    "value": "${{ github.actor }}"
                  },
                  {
                    "name": "ğŸ”— ì»¤ë°‹ ë§í¬",
                    "value": "${{ github.event.head_commit.url }}"
                  }
                ]
              }]
            }