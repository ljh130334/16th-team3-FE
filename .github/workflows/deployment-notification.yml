name: Vercel Deployment Notification

on:
  deployment_status:
    branches:
      - main
      - develop

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Discord Notification
        uses: tsickert/discord-webhook@v5.3.0
        with:
          webhook-url: ${{ secrets.DISCORD_WEBHOOK_URL }}
          content: "ğŸš€ Vercel ë°°í¬ ìƒíƒœ: ${{ github.event.deployment_status.state }}"
          embed-title: "ğŸ“¦ Deployment Status"
          embed-description: >
            ${{ github.event.deployment_status.state == 'failure' && format('âŒ ë°°í¬ ì‹¤íŒ¨: {0}', github.event.deployment_status.description) || 
               github.event.deployment_status.state == 'error' && format('âš ï¸ ë°°í¬ ì˜¤ë¥˜: {0}', github.event.deployment_status.description) ||
               'âœ… ë°°í¬ ì„±ê³µ' }}
          embed-color: ${{ github.event.deployment_status.state == 'success' && '65280' || '16711680' }}
          embed-fields: |
            [
              {
                "name": "Commit",
                "value": "${{ github.sha }}"
              },
              {
                "name": "Status",
                "value": "${{ github.event.deployment_status.state }}"
              },
              {
                "name": "Log URL",
                "value": "${{ github.event.deployment_status.log_url || 'Not available' }}"
              }
            ]